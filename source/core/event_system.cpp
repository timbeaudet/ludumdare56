///
/// @file
/// @details The EventBroadcaster sends an Event to all the EventListeners that are attached.
///
/// <!-- Copyright (c) 2023 Tyre Bytes LLC - All Rights Reserved -->
///------------------------------------------------------------------------------------------------------------------///

#include "event_system.hpp"

#include <turtle_brains/core/tb_defines.hpp>

//--------------------------------------------------------------------------------------------------------------------//
//--------------------------------------------------------------------------------------------------------------------//
//--------------------------------------------------------------------------------------------------------------------//

TyreBytes::Core::Event::Event(tbCore::uint32 id) :
	mID(id)
{
}

//--------------------------------------------------------------------------------------------------------------------//

TyreBytes::Core::Event::~Event(void)
{
}

//--------------------------------------------------------------------------------------------------------------------//

tbCore::uint32 TyreBytes::Core::Event::GetID(void) const
{
	return mID;
}

//--------------------------------------------------------------------------------------------------------------------//
//--------------------------------------------------------------------------------------------------------------------//
//--------------------------------------------------------------------------------------------------------------------//

TyreBytes::Core::EventListener::EventListener(void)
{
}

//--------------------------------------------------------------------------------------------------------------------//

TyreBytes::Core::EventListener::~EventListener(void)
{
}

//--------------------------------------------------------------------------------------------------------------------//

void TyreBytes::Core::EventListener::OnHandleEvent(const Event& event)
{
	tb_unused(event);
}

//--------------------------------------------------------------------------------------------------------------------//

void TyreBytes::Core::EventListener::HandleEvent(const Event& event)
{
	OnHandleEvent(event);
}

//--------------------------------------------------------------------------------------------------------------------//
//--------------------------------------------------------------------------------------------------------------------//
//--------------------------------------------------------------------------------------------------------------------//

TyreBytes::Core::EventBroadcaster::EventBroadcaster(void) :
	mListeners()
{
}

//--------------------------------------------------------------------------------------------------------------------//

TyreBytes::Core::EventBroadcaster::~EventBroadcaster(void)
{
}

//--------------------------------------------------------------------------------------------------------------------//

void TyreBytes::Core::EventBroadcaster::AddEventListener(EventListener& eventListener)
{
	mListeners.push_back(&eventListener);
}

//--------------------------------------------------------------------------------------------------------------------//

void TyreBytes::Core::EventBroadcaster::RemoveEventListener(EventListener& eventListener)
{
	mListeners.remove(&eventListener);
}

//--------------------------------------------------------------------------------------------------------------------//

void TyreBytes::Core::EventBroadcaster::SendEvent(const Event& event)
{
	for (EventListener* listener : mListeners)
	{
		listener->HandleEvent(event);
	}
}

//--------------------------------------------------------------------------------------------------------------------//
